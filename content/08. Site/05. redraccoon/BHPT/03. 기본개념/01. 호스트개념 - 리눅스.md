
# 1. 리눅스 호스트 개념


## 공격자들은 왜 \*Nix(맥, 리눅스, 유닉스)를 많이 쓸까?

- 오픈소스 & 무료, 기업/개발자용 운영체제
- 타겟 OS에 따라 페이로드 제작이 용이

## 왜 칼리 리눅스를 많이 쓸까?

- Offsec 사에서 공식 서포트 -> 꾸준한 업데이트 

# 2. 리눅스 실습박스 준비 

## 랩 테스트 명령어

```
ping ip 

nmap -p 22 -Pn --open ip
```

##  ssh 접속

```
ssh groot0@ip 

password : groot0
```

# 3. 리눅스 실습 

# 4. 명령어

## 시스템 명령어

- hostname
- whoami
- pwd  (print working directory)
- id
- groups groot5 
	해당유저의 그룹명 
- uname
	시스템의 정보를 알려주는 명령어
- uname -a 
	전체 시스템정보 
- uname -r
	커널의 버전
- man 
	manual의 약자 
- man uname
	uname의 설명서
- clear

## 읽기 명령어

- ls
	list의 약자 
- cat
	concatenate 연결하다 
- cat --help
- echo "test" > file.txt
	test가 작성된 파일 생성
- cat file.txt groot1-flag.txt > output.txt
	두 파일 연결 해서 output파일 생성 
- cd (Change Directory)
- 파일명 공백 있을 경우
```
groot2@ip-172-31-235-129:~$ ls
'space tabandquote'   youwaithere

// '\'를 입력 해주면 공백을 인식한다.
cd space\ tabandquote

// 탭 해서 자동완성
 
// '', "" 로 입력해도 가능
cd 'space tabandquote'
```

- hidden file 
```
// 앞에 . 이 있음 
.  ..  .bash_logout  .bashrc  .cache  ...groot4-flag.txt  .profile
```

- 큰 용량 파일 , less
```
less groot5-flag.txt

// 결과 
터미널이 아닌 파일 단에서 볼 수 있음 나올때는 :q
```

- 큰 용량 파일, head & tail
```
head groot5-flag.txt
// 결과 
10줄 까지 조회 

head -n 20 groot5-flag.txt
//결과
20줄 까지 조회

tail은 뒤에서 부터 시작한다고 생각 하면 된다.
```

## 쓰기 명령어

- touch (간단히 파일 만들 때)
```
touch abc.txt
```

- echo (간단한 문구 삽입 시)
```
echo 'groot' > abc.txt
```

- cp(파일 복사)
```
cp abc.txt abc.txt.backup
```

- mv(파일 이동, 이름 변경)
```
mv abc.txt groot.txt

// 이동
mv groot.txt newfolder/
```

- mkdir(디렉토리 생성)
```
mkdir newfolder
```

- rm(remove)
```
rm abc.txt.backup

// 폴더 전체 -r(recursive, 재귀적)
rm -r newfolder/
```

- **Permission 퍼미션**
```
groot5@ip-172-31-235-129:~$ ls -la
total 32
drwxrwx---  4 groot5 groot5 4096 Jan  3 01:48 .
drwxr-xr-x 15 root   root   4096 Jan  3 00:34 ..
-rw-r--r--  1 groot5 groot5  220 Jan  6  2022 .bash_logout
-rw-r--r--  1 groot5 groot5 3771 Jan  6  2022 .bashrc
drwx------  2 groot5 groot5 4096 Jan  3 01:39 .cache
---x--x--x  1 groot5 groot5   35 Oct 30 01:36 groot6-flag.txt
-rw-r--r--  1 groot5 groot5  807 Jan  6  2022 .profile
d---------  2 groot5 groot5 4096 Oct 30 01:36 writeToHere
```
- 3번째 컬럼 groot5는 해당 파일의 권한을 소유한 유저 
- 4번째 컬럼 groot5는 해당 파일의 권한을 소유한 그룹 
- 1번째 컬럼 
```
d rwx rwx rwx  

- d : directory
- r : read      
- w : write     
- x : execution 

- 첫번째 rwx : user
- 두번째 rwx : group
- 세번째 rwx : others

따라서 groot6 flag 는 현재 실행 권한 만 존재
```

- chmod
```
r : 4 , w : 2 , x : 1

// user, group, others 권한부여 
// 모두 읽기 + 쓰기 (r + w) = 6 
chmod 666

// 결과
-rw-rw-rw-  1 groot5 groot5   35 Oct 30 01:36 groot6-flag.txt
```

- base64
```
// 바로 저장 되진 않음
base64 password.txt
YWRtaW4xMjMK

// 디코딩
base64 -d
admin123

// 이중 디코딩
base64 -d groot7-flag.txt | base64 -d
```

- 파이프  
```
// 다음명령어의 입력으로 들어감 
ls | grep "password"
encoded_password.txt
password.txt
```

- redirect >>
```
// 해당 text로 바로 out 
ls > ls_redirector.txt

// 덮어씌움
echo "world" > output.txt

// 내용추가 
echo "hello " >> output.txt
```

## 파일 디렉토리 명령어

- find
```
// type = f(file) , d(directory)
find . -type f -name "*flag.txt"

// 현재
find . -name "groot8-flag.txt" -exec cp {} . \;

//뜻 
-execdir bzgrep "pattern" {} \;
  ^      ^        ^       ^  ^^
  |      |        |       |  ||
  |      |        |       |  |end of the execdir flag
  |      |        |       |  |
  |      |        |       |  shell escape(쉘탈출)
  |      |        |       |
  |      |        |       2. argument to bzgrep
  |      |        |       {} is substituted with the current filename
  |      |       1. argument to bzgrep
  |      |
  |    the command to run
execute a command 

// 파일명 대소문자 구분없이 검색 
find . -iname "flag.txt"

// 일반 오류 무시 
find /경로 -name "파일이름" 2>/dev/null

```

- grep
```
grep "GROOT{" groot9-flag.txt
```

- file 
```
// 파일의 속성을 확인
file groot10-flag

groot10-flag: ELF 64-bit LSB pie executable, x86-64, version 1 (SYSV), dynamically linked, interpreter /lib64/ld-linux-x86-64.so.2, BuildID[sha1]=751d0b8d8098ddba35409bfffa52770d0f3ae8d1, for GNU/Linux 3.2.0, not stripped
```

- strings
```
// 문자열 문자를 파일로 반환하는 데 사용
// 주로 바이너리 파일(텍스트가 아닌파일)의 내용을 확인하고 텍스트를 추출
strings groot10-flag
```

- diff
```
//diff : difference 
// 두 파일의 차이점을 알려줌

diff groot11-flag1.txt groot11-flag2.txt
```

- 7zip, zip, gzip, 
```
file groot12-flag.txt
groot12-flag.txt: 7-zip archive data, version 0.4

// 7zip 압축 해제 
7z e groot12-flag.txt

// zip 파일
file groot12flag.xyz.zzz.abc
groot12flag.xyz.zzz.abc: Zip archive data, at least v1.0 to extract, compression method=store

// - 압축해제
unzip groot12flag.xyz.zzz.abc

// gzip 파일
file groot12flag.xyz.zzz
groot12flag.xyz.zzz: gzip compressed data, was "groot12flag.xyz", last modified: Mon Oct 30 01:36:50 2023, from Unix, original size modulo 2^32 10240

// - 확장자를 gz로 변경 필요
mv groot12flag.xyz.zzz groot12flga.xyz.zzz.gz

// - 압축해제
gzip -d groot12flga.xyz.zzz.gz

// tar
file groot12flga.xyz.zzz
groot12flga.xyz.zzz: POSIX tar archive (GNU)

// - 압축해제
tar -xvf groot12flga.xyz.zzz

```

## VIM 에디터

- 노멀모드 (esc)
```
// 커서이동하기 
h, j, k, l

// 줄의 처음/끝으로 이동
처음 : ^(공백제외)  , 0(공백포함- 나는 안먹힘)
끝 : $ 

// 파일의 처음/끝
처음 : gg
끝 : G 

현재 문자삭제 : x
커서 앞 문자삭제 : X

되돌리기 : u
다시실행 : Ctrl+r

복사 : y
복사(커서부터 한줄 끝 까지): y$

텍스트 검색 : /
// 텍스트 치환 TEXT => abc
:s/TEXT/abc

```
- 인서트 모드 (i)
- 커맨드 모드 (:)
```
w : 저장
q : 종료 
wq : 저장 및 종료 
```

- 비주얼 모드 (v)
```
드래그해서 복사하거나 할때 좋음 
```

# 5. 스크립팅

1. shebang 

> 어떤 인터프리터를 사용할지 설정하는 것 

- 정의 방법
```
#!/bin/bash
```

- 변수
```
//터미널 창에서 바로 입력 가능
ipaddress=127.0.0.1

// 변수 사용하려면 $ 
echo "My ip address is : $ipaddress"

> My ip address is : 127.0.0.1
```

- 조건문
```
#!/bin/bash

 age=18

 if [ $age -ge 18 ] ; then // ge or lt 
     echo "You are an adult."
 else
     echo "You are a minor."
 fi // if 끝나면 fi 필수 
```

- 실행
```
chmod +x age 

./age 
```

- for roop
```
#!/bin/bash

 for number in {1...5}
 do
     echo "Number: $number"
 done
```



# 9. flag 

- groot1 : GROOT{R@ns0m_M3_If_Y0u_C@n!>}
- groot2 : GROOT{N0_M0r3_R3scu3_B@ckups}
- groot3 : GROOT{D3crypt0r_P@yL0ad!}
- groot4 : GROOT{F1l3s_3ncrypt3d_Y0urs_N0w!}
- groot5 : GROOT{H@ck3r_Pr00f_Y0ur_Syst3m}
- groot6 : GROOT{1ns3cure_P@ssw0rdhBN0_M0r3!}
- groot7 : GROOT{D0wnl04d_Th3_R3scu3_T00l}
- groot8 : GROOT{F1ght_R4ns0mW@re_W1th_Laughs}
- groot9 : GROOT{N3v3r_P@y_The_CyberV1ll@1n$}
- groot10 : GROOT{R3st0r3_Fr0m_Laughabl3_B@ckups}
- groot11 : GROOT{S3cr3t_P@ssw0rd123!@#}
- groot12 : GROOT{MOD2_UNIX_COMPLETED!@!}

172.31.235.129