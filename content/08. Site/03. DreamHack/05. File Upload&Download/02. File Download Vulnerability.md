
# 1. 파일다운로드 취약점 이란? 
**파일 다운로드 취약점(File Download Vulnerability)** 은  웹 서비스를 통해 서버의 파일 시스템에 존재하는 파일을 내려 받는 과정에서 발생하는 보안 취약점이며, 이용자가 다운로드할 파일의 이름을 임의로 정할 수 있을 때 발생합니다.

서버 파일 시스템에 존재하는 임의 파일을 다운로드하여 민감 정보가 포함된 파일, 예를 들어 데이터베이스 백업본, 외부 API 서버의 비밀키 등이 포함된 설정 파일등을 탈취할 수 있음.

웹 서비스는 이용자가 업로드한 파일을 다운로드 받거나 이미지를 불러올 때 특정 디렉터리에 있는 파일만 접근하도록 해야 합니다. Path Traversal을 이용한 파일 다운로드 취약점은 파일 이름을 직접 입력 받아 **임의 디렉터리에 있는 파일을 다운로드** 받을 수 있는 취약점을 말합니다. **Figure 12**는 파일 다운로드 취약점이 자주 발생하는 URL 패턴입니다.

**Figure 12. 파일 다운로드 취약점이 자주 발생하는 URL 패턴** 
```
https://vulnerable-web.dreamhack.io/download/?filename=notes.txt

https://vulnerable-web.dreamhack.io/download/?filename=../../../../../../etc/passwd

https://vulnerable-web.dreamhack.io/images.php?fn=6ed0dd02806fa89e233b84f4.png
```

# 2. etc

* 실행중인 프로세스의 메모리 정보
```
/proc/self/maps 
```

# 2. 대응방안

다운로드 취약점을 막으려면 요청된 파일 이름을 `basepath`과 같은 함수를 통해 검증하거나 파일 이름과 1:1 맵핑되는 키를 만들어 이용자로부터 파일 이름이 아닌 키를 요청하도록 해야 합니다.